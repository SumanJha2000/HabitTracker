<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/34162fcf4d.js" defer crossorigin="anonymous"></script>
    <!-- <script src="https://kit.fontawesome.com/34162fcf4d.js" defer crossorigin="anonymous"></script> -->
</head>

<body>
    <!--main container-->
    <div class="container">
        <!--navbar-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand text-center font-weight-bold text-danger h1" href="#">HABITS TRACKER</a>
            </div>
        </nav>



        <!--display habits-->
        <ul class="list-group my-4 ">

            <div class="my-2 d-flex justify-content-between align-items-center">
                <h5 class="text-primary">HABITS LIST</h5>
                <a class="ml-auto font-weight-bold btn btn-md btn-outline-info" href="/">
                    DAILY VIEW
                </a>
            </div>
            <%habits.forEach((habit)=>{%>
                <div class="">

                    <div style='background-color:rgb(201, 176, 237)' class="mt-3 row py-4 px-3">
                        <h5 class="w-100 text-center">
                            <%=habit.name%>
                        </h5>
                        <%currDay.forEach((d)=>{%>
                            <%var found=false;%>
                                <%var status='none' ;%>
                                    <% habit.dates.forEach(item=>{
                                        if(item.date==d.date){
                                        status=item.complete;
                                        found=true;
                                        }
                                        })%>

                                        <div class="col">
                                            <div style="background-color:rgb(235, 235, 246)" class="card border-0 mb-3"
                                                style="max-width: 18rem;">
                                                <div class="card-header d-flex justify-content-center flex-column">
                                                    <p class="badge badge-info">
                                                        <%=d.date%>
                                                    </p>
                                                    <p class="text-center mx-auto badge badge-primary">
                                                        <%=d.day%>
                                                    </p>
                                                </div>
                                                <div style="background-color:aliceblue"
                                                    class="card-body text-danger d-flex justify-content-center align-items-center">
                                                    <a class="text-dark"
                                                        href="/toggle/?date=<%=d.date%>&id=<%=habit._id%>"
                                                        role="button">
                                                        <%if(found && status=="done" ){%>
                                                            <p class="badge badge-success">
                                                                <i class="fa fa-check fa-2x "></i>
                                                            </p>
                                                            <%}else if(found && status=="not done" ){%>
                                                                <p class="badge badge-danger">
                                                                    <i class="fa fa-xmark fa-2x "></i>
                                                                </p>
                                                                <%}else{%>
                                                                    <p class="badge badge-warning">
                                                                        <i class="fa fa-hourglass fa-2x "></i>
                                                                    </p>
                                                                    <%}%>
                                                    </a>
                                                    <p class="card-text"></p>
                                                </div>
                                            </div>

                                        </div>
                                        <%})%>
                    </div>
                    <%})%>
                </div>

        </ul>
    </div>

</body>

</html>